Title: Install with RPM
----

Text:

Currently we support RHEL6/CentOS6 and RHEL7/CentOS7.


### Add Zammad & epel-release RPM repos and install RPM

```bash
sudo yum install epel-release
sudo rpm --import https://rpm.packager.io/key
```

CentOS7

```bash

echo "[zammad]
name=Repository for zammad/zammad application.
baseurl=https://rpm.packager.io/gh/zammad/zammad/centos7/package-1.0
enabled=1" | sudo tee /etc/yum.repos.d/zammad.repo
```

CentOS6

```bash
echo "[zammad]
name=Repository for zammad/zammad application.
baseurl=https://rpm.packager.io/gh/zammad/zammad/centos6/package-1.0
enabled=1" | sudo tee /etc/yum.repos.d/zammad.repo
```

```bash
sudo yum install zammad
```

### Configure your databases

The example uses PostgreSQL (we also support MySQL/MariaDB).

Get a fresh database server up and running:
```bash
sudo postgresql-setup initdb
sudo systemctl start postgresql.service
sudo systemctl enable postgresql.service
sudo -u postgres createuser --interactive
sudo -u postgres createuser -d zammad
```

Check config for database connection in /opt/zammad/config/database.yml

```bash
production:
  adapter: postgresql
  database: zammad_production
  pool: 50
  timeout: 5000
  encoding: utf8
  username: zammad
  password:
```

### Initialize your database

```bash
shell> sudo zammad run rake db:create
shell> sudo zammad run rake db:migrate
shell> sudo zammad run rake db:seed
```

### Start Zammad services:

Generate init scripts for your platform and start Zammad services:
```bash
shell> sudo zammad scale web=1 worker=1 websocket=1
```

Start Zammad services at boot:
```bash
shell> sudo chkconfig zammad on
```

You can manage the Zammad services manually:
```bash
shell> sudo service zammad status
shell> sudo service zammad stop
shell> sudo service zammad start
shell> sudo service zammad restart

# only web application server
shell> sudo service zammad-web status
shell> sudo service zammad-web stop
shell> sudo service zammad-web start
shell> sudo service zammad-web restart

# only worker process
shell> sudo service zammad-worker status
shell> sudo service zammad-worker stop
shell> sudo service zammad-worker start
shell> sudo service zammad-worker restart

# only websocket server
shell> sudo service zammad-websocket status
shell> sudo service zammad-websocket stop
shell> sudo service zammad-websocket start
shell> sudo service zammad-websocket restart
```

### Go to http://localhost:3000 and you'll see:
  "Welcome to Zammad!", there you need to create your admin user and you need to invite other agents.


### Configure nginx Reverse Proxy

First install nginx:
```bash
shell> sudo yum install nginx
```

Configure nginx
```bash
shell> sudo vi /etc/nginx/nginx.conf
```

Insert the following into the location part, which should be empty by default and uncomment the root directive:
```bash
#root         /usr/share/nginx/html;

location / {
  proxy_read_timeout      300;
  proxy_connect_timeout   300;
  proxy_redirect          off;

  proxy_http_version 1.1;
  
  proxy_set_header    Host                $http_host;
  proxy_set_header    X-Real-IP           $remote_addr;
  proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;
  proxy_set_header    X-Forwarded-Proto   $scheme;
  
  proxy_pass http://localhost:3000;
}
```

In case you have SELinux enabled you have to enable httpd network connect
```bash
shell> sudo setsebool httpd_can_network_connect on -P
```

Start and enable nginx
```bash
shell> sudo systemctl start nginx
shell> sudo systemctl enable nginx
```
